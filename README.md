# TomTokenGenerator

CLI-приложение на C# для генерации, сериализации и записи последовательности токенов TomToken в формате JSON.

## Особенности

- Потоковая генерация и сериализация токенов без буферизации всего объема
- Ограничение длины строк в JSON (не более 250 символов)
- Поддержка различных типов токенов: текст, перевод строки, повтор, ссылка
- Запись в файл или stdout
- Таблица трансляции для числовых ссылок

## Типы токенов

- **TextToken** - токен типа "текст"
- **NewLineToken** - токен типа "перевод строки" (LF, CR, CRLF)
- **RepeatToken** - токен типа "повтор другого токена N раз"
- **ReferenceToken** - токен типа "числовая ссылка на другую сущность"

## Использование

```bash
TomTokenGenerator [опции]
```

### Опции

- `--count, -c <число>` - Количество токенов для генерации (по умолчанию: 1000)
- `--output, -o <путь>` - Путь к файлу для записи результата
- `--stdout` - Вывод в стандартный поток вывода (по умолчанию)
- `--help, -h` - Вывод справки

### Примеры

```bash
# Генерация 1000 токенов и вывод в stdout
TomTokenGenerator

# Генерация 10000 токенов и запись в файл
TomTokenGenerator --count 10000 --output tokens.json

# Генерация 5000 токенов и вывод в stdout
TomTokenGenerator -c 5000 --stdout
```

## Формат JSON

```json
{
  "metadata": {
    "name": "TomToken Sequence - 2025-05-28",
    "created_at": "2025-05-28T08:02:12Z",
    "generator_version": "1.0.0",
    "token_count": 1000,
    "TranslationTable": [
      {
        "id": 1,
        "token": {
          "type": "text",
          "value": " "
        }
      },
      // ... другие записи таблицы трансляции
    ]
  },
  "content": [
    {
      "type": "text",
      "value": "the"
    },
    {
      "type": "reference",
      "reference_id": 1
    },
    // ... другие токены
  ]
}
```

## Архитектура

Проект разделен на несколько компонентов:

- **Models** - модели данных (TomToken и его наследники)
- **Generators** - генераторы токенов
- **Serialization** - сериализаторы токенов
- **Translation** - таблица трансляции для числовых ссылок
- **Metadata** - метаданные JSON
- **CommandLine** - парсинг аргументов командной строки

## Сборка и запуск

```bash
# Сборка проекта
dotnet build

# Запуск
dotnet run -- [опции]
```
